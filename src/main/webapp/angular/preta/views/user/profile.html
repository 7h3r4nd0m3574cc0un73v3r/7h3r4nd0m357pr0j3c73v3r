<div class="col-lg-offset-3 col-md-offset-3 col-lg-9 col-md-9 col-xs-12">
	<div class="row">
		<div class="row">		
			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
				<div class="row">
					<div class="container-fluid">
						<div class="default-panel animated bounceInUp">
							<div class="default-panel-header">
								<h4 class="title text-mainge"><i class="fa fa-user"></i>&nbsp;Mon profil</h4> <small>Mettez à jour vos informations</small>
							</div>
							<div class="default-panel-content">
								<div class="container-fluid">
									<div layout="column" layout-align="center center" x-ng-show="isLoading" layout-padding>
										<md-progress-circular flex md-mode="indeterminate"></md-progress-circular>
						        	</div>
							        	
									<md-content layout-padding style="background-color: inherit;" x-ng-if="!isLoading">
									      <form name="userForm">
									      
									      	<div layout-padding layout="column" layout-align="center">
									      		<h3 style="color: #fb5520;" class="text-center" x-ng-if="entity.profileCompletion < 100" flex="100">
									      			<i class="fa fa-warning"></i>&nbsp;<span class="blink blink-infinite"><b>PROFIL INCOMPLET : {{ entity.profileCompletion }} %</b></span>
									      		</h3>
								      			<uib-progressbar value="entity.profileCompletion" type="warning" style="width: 100%;" flex="100"></uib-progressbar>
									      		<p flex="100" class="text-center text-muted" x-ng-if="entity.profileCompletion >= 100">
													<b>Profil complet à {{ entity.profileCompletion }} % !</b>									      		
									      		</p>
									      		<p flex="100" class="text-center" x-ng-if="entity.profileCompletion < 100 && !entity.approved">
													Vous ne pourrez pas effectuer de commande tant que votre profil n'est pas complet.							      		
													<br/>
													Merci de bien vouloir renseigner toutes les informations requises.
									      		</p>
									      		<p flex="100" class="text-center" x-ng-if="entity.profileCompletion == 100 && !entity.approved">
													Votre profil est complet, mais vous ne pourrez toujours pas effectuer de commande
													tant qu'il ne sera pas validé par l'administration.
													<br /><br />
													Merci de bien vouloir patienter pendant que l'administration valide votre profil.
																			      		
									      		</p>
									      	</div>
									      	
									      	<h4 class="text-mainge"><i class="fa fa-file-archive-o"></i> <b>Informations personnelles</b></h4><br />
									        <div layout-gt-sm="row">
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Prénom</label>
									            <input ng-model="entity.userInfo.firstName">
									          </md-input-container>
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Autres prénoms</label>
									            <input ng-model="entity.userInfo.middleName">
									          </md-input-container>
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Nom</label>
									            <input ng-model="entity.userInfo.lastName">
									          </md-input-container>
									        </div>
									        
									        <div layout-gt-sm="row">
										        <md-input-container class="md-block" flex-gt-sm>
										          <label>Genre</label>
										            <md-select ng-model="entity.userInfo.gender">
										              <md-option value="MALE">
										                Masculin
										              </md-option>
										              <md-option value="FEMALE">
										                Féminin
										              </md-option>
										              <md-option value="UNDEFINED">
										                Autre
										              </md-option>
										            </md-select>
										        </md-input-container>
									          <md-input-container>
									            <label>Date de naissance</label>
									            <md-datepicker ng-model="entity.userInfo.birthDay"></md-datepicker>
									          </md-input-container>
									        </div>
									        
									        <h4 class="text-mainge"><i class="fa fa-map-marker"></i> <b>Localisation</b></h4>
									        
									        <div layout-gt-sm="row">
									        	
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Pays</label>
									            <md-select ng-model="entity.userInfo.country">
									            	<md-option ng-repeat="country in countries" ng-value="country.code" ng-disabled="country.code != 'BJ'">
									            		{{ country.name }}
									            	</md-option>
									            </md-select>
									          </md-input-container>
									          
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Départment</label>
									            <input ng-model="entity.userInfo.department" type="text">
									          </md-input-container>
									          
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Ville</label>
									            <input ng-model="entity.userInfo.city" type="text">
									          </md-input-container>
									        </div>
									        
									        <div layout-gt-sm="row">
									          
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Arondissement</label>
									            <input ng-model="entity.userInfo.borough" type="text">
									          </md-input-container>
									          
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Quartier</label>
									            <input ng-model="entity.userInfo.district" type="text">
									          </md-input-container>
									        </div>
									        
									        <div layout-gt-sm="row">
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Rue</label>
									            <input ng-model="entity.userInfo.street" type="text">
									          </md-input-container>
									          
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Maison</label>
									            <input ng-model="entity.userInfo.homeNumber" type="text">
									          </md-input-container>
									        </div>
									        
										    <div layout-gt-sm="row">
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Adresse complète pour livraison</label>
									            <textarea ng-model="entity.userInfo.fullAddress" md-maxlength="150" rows="5" md-select-on-focus></textarea>
									          </md-input-container>
										    </div>
										    
										    <h4 class="text-mainge"><i class="fa fa-phone"></i> <b>Contacts</b></h4>
										    
										    <div layout-gt-sm="row">
									          <md-input-container class="md-block" flex-gt-sm>
									            <label>Adresse E-Mail</label>
									            <md-icon><i class="fa fa-envelope text-mainge"></i></md-icon>
									            <input ng-model="entity.userInfo.email" ng-disabled="true" />
									          </md-input-container>
										    </div>
										    
										    <!-- Security -->
										    <h4 class="text-mainge"><i class="fa fa-key"></i> <b>Sécurité</b></h4>
										    
										    <div layout="row" layout-align="center center">
										    	<md-button class="md-raised md-primary" x-ng-click="showPWDialog( $event)">
										    		<i class="fa fa-lock"></i>&nbsp;Changer Mot de Passe
										    	</md-button>
										    </div>
										    
										    <!-- EMP Accounts -->
											<h4 class="text-mainge"><i class="fa fa-money"></i> <b>Compte Monnaie Numérique</b></h4>
											    <div layout-gt-sm="row" layout-sm="column" layout-wrap>
											    	<div flex="auto"  x-ng-repeat="eAccount in entity.eAccounts">
												    	 <md-card>
													        <md-card-title>
													          <md-card-title-media>
													            <div class="md-media-sm card-media">
													            	<!-- <img ng-src="rest-api/e-money-provider/{{ eAccount.emp.id }}/fetch-logo" class="img-responsive" style="max-height: 100px; max-width: 100px;" /> -->
													            	<img ng-src="https://drive.google.com/uc?id={{ eAccount.emp.logoGoogleId }}&export=download" class="img-responsive" style="max-height: 100px; max-width: 100px;" />
													            </div>
													          </md-card-title-media>
													          <md-card-title-text>
													            <span class="md-headline">#{{ eAccount.relId }} - {{ eAccount.emp.name }}</span>
													            <span class="md-subhead"> {{ eAccount.isDefault ? 'Compte par défaut' : '' }}</span>
													          </md-card-title-text>
													        </md-card-title>
													        <md-card-content>
													        	<p class="text-left">
													        		<label>Numéro</label>
													        		<span>
													        			{{ eAccount.account }}
													        		</span>
													        	</p>
													        </md-card-content>
													        <md-card-actions layout="row" layout-align="end center">
													          <md-button x-ng-disabled="eAccount.isDefault" x-ng-click="setEAccountAsDefault( eAccount.id)">Par défaut</md-button>
													          <md-button class="md-warn" x-ng-disabled="eAccount.isDefault || eAccounts.length == 1" x-ng-click="showDeleteModal( eAccount.id, $event)">Supprimer</md-button>
													        </md-card-actions>
													      </md-card>
												    </div>
												    
												    <div flex="100" layout="row" layout-align="end center">
										            	<md-button class="md-raised" x-ng-click="showDialog( $event)">
										            		<i class="fa fa-plus-square"></i> Ajouter un compte
										            	</md-button>
												    </div>
											    </div>
										  	  <a class="btn p-btn-default" type="submit" x-ng-click="updateProfile()">Mettre à jour <i class="fa fa-check-circle"></i></a>
									      </form>
									  </md-content>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>
